<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Meta Uber ‚Ä¢ Controle Financeiro</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">

<style>
*{box-sizing:border-box}
body{
  margin:0;
  font-family:Poppins,sans-serif;
  min-height:100vh;
  padding:20px;
  background:
    linear-gradient(rgba(0,0,0,.55),rgba(0,0,0,.55)),
    url("https://images.unsplash.com/photo-1520607162513-77705c0f0d4a?auto=format&fit=crop&w=1600&q=80");
  background-size:cover;
  background-position:center;
}
.container{
  max-width:1100px;
  margin:auto;
  display:grid;
  grid-template-columns:1fr;
  gap:20px;
}
@media(min-width:900px){
  .container{grid-template-columns:1fr 1fr}
  .full{grid-column:1/-1}
}
header,.card{
  background:rgba(255,255,255,.95);
  border-radius:16px;
  padding:20px;
  box-shadow:0 10px 30px rgba(0,0,0,.15);
}
header{
  display:flex;
  justify-content:space-between;
  align-items:center;
}
h1,h2{margin:0;color:#1e3c72}
label{display:block;margin-top:12px}
input{
  width:100%;
  padding:12px;
  margin-top:6px;
  border-radius:10px;
  border:1px solid #ccc;
}
button{
  width:100%;
  margin-top:15px;
  padding:14px;
  border:none;
  border-radius:12px;
  background:linear-gradient(135deg,#1e3c72,#2a5298);
  color:#fff;
  font-weight:600;
  cursor:pointer;
}
.stats{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
  gap:15px;
}
.stat{
  background:#f0f3fa;
  padding:15px;
  border-radius:14px;
  text-align:center;
}
.stat strong{display:block;font-size:1.4rem;color:#1e3c72}
.alerta{color:#c0392b;font-weight:600}
.ok{color:#27ae60;font-weight:600}
table{
  width:100%;
  border-collapse:collapse;
  font-size:.85rem;
}
th,td{
  border-bottom:1px solid #ddd;
  padding:8px;
  text-align:center;
}
th{background:#f0f3fa}
.acoes button{
  width:auto;
  padding:6px 10px;
  margin:2px;
}
canvas{width:100%;max-height:240px}
</style>
</head>

<body>
<div class="container">

<header class="full">
  <h1>Meta Uber üí∞</h1>
  <span>Controle inteligente de metas</span>
</header>

<div class="card">
  <h2>Configura√ß√µes</h2>
  <label>Meta Total (R$)</label>
  <input id="meta" type="number" value="1500">

  <label>Data Final</label>
  <input id="dataFinal" type="date" value="2026-02-06">

  <label>Gasolina di√°ria (R$)</label>
  <input id="gasolina" type="number" value="80">
</div>

<div class="card">
  <h2>Ganhos do Dia</h2>

  <label>Data</label>
  <input id="dataDia" type="date">

  <label>06h √†s 10h</label>
  <input id="manha" type="number">

  <label>10h √†s 16h</label>
  <input id="tarde" type="number">

  <label>16h √†s 22h</label>
  <input id="noite" type="number">

  <h3 style="margin-top:20px">Gastos Extras</h3>

  <label>Descri√ß√£o (alimenta√ß√£o, caf√©, etc)</label>
  <input id="descGasto" type="text" placeholder="Ex: Almo√ßo">

  <label>Valor do gasto (R$)</label>
  <input id="valorGasto" type="number">

  <button onclick="salvarDia()">Salvar / Atualizar</button>
</div>

<div class="card full">
  <h2>Resumo & Planejamento</h2>
  <div class="stats" id="resultado"></div>
  <div id="planejamento"></div>
</div>

<div class="card full">
  <h2>Gr√°fico de Progresso</h2>
  <canvas id="grafico"></canvas>
</div>

<div class="card full">
  <h2>Hist√≥rico</h2>
  <table>
    <thead>
      <tr>
        <th>Data</th>
        <th>Bruto</th>
        <th>Gasolina</th>
        <th>Gastos Extras</th>
        <th>L√≠quido</th>
        <th>A√ß√µes</th>
      </tr>
    </thead>
    <tbody id="tabela"></tbody>
  </table>
</div>

</div>

<script>
let dias = JSON.parse(localStorage.getItem("diasUber")) || [];
let editando = null;

function salvarLocal(){
  localStorage.setItem("diasUber", JSON.stringify(dias));
}

function salvarDia(){
  if(!dataDia.value){ alert("Informe a data"); return; }

  const manha = +manhaInput.value || 0;
  const tarde = +tardeInput.value || 0;
  const noite = +noiteInput.value || 0;
  const gastoExtra = +valorGasto.value || 0;

  const bruto = manha + tarde + noite;
  const gas = +gasolina.value;
  const liquido = bruto - gas - gastoExtra;

  const registro = {
    data: dataDia.value,
    bruto,
    gas,
    gastoExtra,
    descGasto: descGasto.value,
    liquido
  };

  if(editando !== null){
    dias[editando] = registro;
    editando = null;
  } else {
    dias.push(registro);
  }

  salvarLocal();
  limpar();
  render();
}

function editarDia(i){
  const d = dias[i];
  dataDia.value = d.data;
  valorGasto.value = d.gastoExtra;
  descGasto.value = d.descGasto || "";
  editando = i;
}

function excluirDia(i){
  if(confirm("Excluir este dia?")){
    dias.splice(i,1);
    salvarLocal();
    render();
  }
}

function limpar(){
  dataDia.value = "";
  manhaInput.value = "";
  tardeInput.value = "";
  noiteInput.value = "";
  valorGasto.value = "";
  descGasto.value = "";
}

function render(){
  tabela.innerHTML = "";
  let total = 0;

  dias.forEach((d,i)=>{
    total += d.liquido;
    tabela.innerHTML += `
      <tr>
        <td>${d.data}</td>
        <td>R$ ${d.bruto.toFixed(2)}</td>
        <td>R$ ${d.gas.toFixed(2)}</td>
        <td title="${d.descGasto}">R$ ${d.gastoExtra.toFixed(2)}</td>
        <td><strong>R$ ${d.liquido.toFixed(2)}</strong></td>
        <td class="acoes">
          <button onclick="editarDia(${i})">‚úèÔ∏è</button>
          <button onclick="excluirDia(${i})">üóëÔ∏è</button>
        </td>
      </tr>`;
  });

  atualizarResumo(total);
  desenharGrafico();
}

function atualizarResumo(total){
  const metaTotal = +meta.value;
  const diasRest = Math.max(0, Math.ceil((new Date(dataFinal.value) - new Date()) / 86400000));
  const falta = metaTotal - total;

  resultado.innerHTML = `
    <div class="stat">Total L√≠quido<strong>R$ ${total.toFixed(2)}</strong></div>
    <div class="stat">Dias Restantes<strong>${diasRest}</strong></div>
    <div class="stat">Falta<strong>R$ ${Math.max(0,falta).toFixed(2)}</strong></div>
  `;

  planejamento.innerHTML =
    (diasRest > 0 && falta > 0)
      ? `<p class="alerta">Meta di√°ria necess√°ria: R$ ${(falta/diasRest).toFixed(2)}</p>`
      : `<p class="ok">üéâ Meta atingida!</p>`;
}

function desenharGrafico(){
  const ctx = grafico.getContext("2d");
  ctx.clearRect(0,0,grafico.width,grafico.height);

  const max = Math.max(...dias.map(d=>d.liquido),1);

  dias.forEach((d,i)=>{
    const x = (i+1)*(grafico.width/(dias.length+1));
    const y = grafico.height - (d.liquido/max)*grafico.height;
    ctx.fillStyle="#2a5298";
    ctx.fillRect(x-12,y,24,grafico.height-y);
  });
}

// ELEMENTOS
const meta = document.getElementById("meta");
const dataFinal = document.getElementById("dataFinal");
const gasolina = document.getElementById("gasolina");
const dataDia = document.getElementById("dataDia");
const manhaInput = document.getElementById("manha");
const tardeInput = document.getElementById("tarde");
const noiteInput = document.getElementById("noite");
const valorGasto = document.getElementById("valorGasto");
const descGasto = document.getElementById("descGasto");
const tabela = document.getElementById("tabela");
const resultado = document.getElementById("resultado");
const planejamento = document.getElementById("planejamento");
const grafico = document.getElementById("grafico");

render();
</script>
</body>
</html>
