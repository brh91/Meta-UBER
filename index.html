<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Meta Uber ‚Ä¢ Controle Financeiro</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">

<style>
*{box-sizing:border-box}
body{
  margin:0;
  font-family:Poppins,sans-serif;
  background:
    linear-gradient(rgba(0,0,0,.55),rgba(0,0,0,.55)),
    url("https://images.unsplash.com/photo-1520607162513-77705c0f0d4a?auto=format&fit=crop&w=1600&q=80");
  background-size:cover;
  background-position:center;
  min-height:100vh;
  padding:20px;
}
.container{
  max-width:1100px;
  margin:auto;
  display:grid;
  grid-template-columns:1fr;
  gap:20px;
}
@media(min-width:900px){
  .container{grid-template-columns:1fr 1fr}
  .full{grid-column:1/-1}
}
.card,header{
  background:rgba(255,255,255,.95);
  border-radius:16px;
  padding:20px;
  box-shadow:0 10px 30px rgba(0,0,0,.15);
}
header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:10px;
}
h1{margin:0;color:#1e3c72}
h2{text-align:center;color:#1e3c72}
label{display:block;margin-top:10px;font-size:.9rem}
input{
  width:100%;
  padding:12px;
  margin-top:5px;
  border-radius:10px;
  border:1px solid #ccc;
}
button{
  margin-top:15px;
  width:100%;
  padding:14px;
  border:none;
  border-radius:12px;
  background:linear-gradient(135deg,#1e3c72,#2a5298);
  color:#fff;
  font-weight:600;
  cursor:pointer;
}
.stats{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
  gap:15px;
}
.stat{
  background:#f0f3fa;
  padding:15px;
  border-radius:14px;
  text-align:center;
}
.stat strong{display:block;font-size:1.4rem;color:#1e3c72}
.alerta{color:#c0392b;font-weight:600}
.ok{color:#27ae60;font-weight:600}
table{
  width:100%;
  border-collapse:collapse;
  font-size:.85rem;
}
th,td{
  border-bottom:1px solid #ddd;
  padding:8px;
  text-align:center;
}
th{background:#f0f3fa}
canvas{width:100%;max-height:240px}
</style>
</head>

<body>
<div class="container">

<header class="full">
  <h1>Meta Uber üí∞</h1>
  <span>Controle inteligente de metas</span>
</header>

<div class="card">
  <h2>Configura√ß√µes</h2>
  <label>Meta Total (R$)</label>
  <input id="meta" type="number" value="1500">

  <label>Data final</label>
  <input id="dataFinal" type="date" value="2026-02-06">

  <label>Gasolina di√°ria (R$)</label>
  <input id="gasolina" type="number" value="80">
</div>

<div class="card">
  <h2>Ganhos do Dia</h2>
  <label>Data</label>
  <input id="dataDia" type="date">

  <label>06h √†s 10h</label>
  <input id="manha" type="number">

  <label>10h √†s 16h</label>
  <input id="tarde" type="number">

  <label>16h √†s 22h</label>
  <input id="noite" type="number">

  <button onclick="adicionarDia()">Salvar Dia</button>
</div>

<div class="card full">
  <h2>Resumo & Planejamento</h2>
  <div class="stats" id="resultado"></div>
  <div id="planejamento" style="margin-top:10px"></div>
</div>

<div class="card full">
  <h2>Gr√°fico de Progresso</h2>
  <canvas id="grafico"></canvas>
</div>

<div class="card full">
  <h2>Hist√≥rico Di√°rio</h2>
  <table>
    <thead>
      <tr>
        <th>Data</th><th>Manh√£</th><th>Tarde</th><th>Noite</th><th>Bruto</th><th>L√≠quido</th>
      </tr>
    </thead>
    <tbody id="tabelaHistorico"></tbody>
  </table>
</div>

</div>

<script>
// ===== PERSIST√äNCIA =====
let dias = JSON.parse(localStorage.getItem("diasUber")) || [];

function salvar(){
  localStorage.setItem("diasUber",JSON.stringify(dias));
}

// ===== FUN√á√ïES =====
function adicionarDia(){
  const data = dataDia.value;
  if(!data){alert("Informe a data");return;}

  const manha = +manhaInput.value||0;
  const tarde = +tardeInput.value||0;
  const noite = +noiteInput.value||0;
  const gasolina = +gasolinaInput.value;

  const bruto = manha+tarde+noite;
  const liquido = bruto-gasolina;

  dias.push({data,manha,tarde,noite,bruto,liquido});
  salvar();
  render();

  manhaInput.value=tardeInput.value=noiteInput.value="";
}

function render(){
  tabelaHistorico.innerHTML="";
  let totalLiquido=0;

  dias.forEach(d=>{
    totalLiquido+=d.liquido;
    tabelaHistorico.innerHTML+=`
      <tr>
        <td>${d.data}</td>
        <td>${d.manha.toFixed(2)}</td>
        <td>${d.tarde.toFixed(2)}</td>
        <td>${d.noite.toFixed(2)}</td>
        <td>${d.bruto.toFixed(2)}</td>
        <td>${d.liquido.toFixed(2)}</td>
      </tr>`;
  });

  const meta = +metaInput.value;
  const hoje = new Date();
  const fim = new Date(dataFinalInput.value);
  const diasRest = Math.max(0,Math.ceil((fim-hoje)/(1000*60*60*24)));
  const falta = meta-totalLiquido;

  resultado.innerHTML=`
    <div class="stat">Total acumulado<strong>R$ ${totalLiquido.toFixed(2)}</strong></div>
    <div class="stat">Dias restantes<strong>${diasRest}</strong></div>
    <div class="stat">Falta<strong>R$ ${Math.max(0,falta).toFixed(2)}</strong></div>
  `;

  planejamento.innerHTML = (diasRest>0 && falta>0)
    ? `<p class="alerta">‚û°Ô∏è Nova meta di√°ria: R$ ${(falta/diasRest).toFixed(2)}</p>`
    : `<p class="ok">üéâ Meta atingida!</p>`;

  desenharGrafico();
}

function desenharGrafico(){
  const ctx=grafico.getContext("2d");
  ctx.clearRect(0,0,grafico.width,grafico.height);
  const max=Math.max(...dias.map(d=>d.liquido),1);
  dias.forEach((d,i)=>{
    const x=(i+1)*(grafico.width/(dias.length+1));
    const y=grafico.height-(d.liquido/max)*grafico.height;
    ctx.fillStyle="#2a5298";
    ctx.fillRect(x-12,y,24,grafico.height-y);
  });
}

// ===== ELEMENTOS =====
const metaInput=document.getElementById("meta");
const dataFinalInput=document.getElementById("dataFinal");
const gasolinaInput=document.getElementById("gasolina");
const dataDia=document.getElementById("dataDia");
const manhaInput=document.getElementById("manha");
const tardeInput=document.getElementById("tarde");
const noiteInput=document.getElementById("noite");
const tabelaHistorico=document.getElementById("tabelaHistorico");
const resultado=document.getElementById("resultado");
const planejamento=document.getElementById("planejamento");
const grafico=document.getElementById("grafico");

// ===== INIT =====
render();
</script>
</body>
</html>
